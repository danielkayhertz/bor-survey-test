<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Board of Review Candidate Survey | Impact for Equity</title>
<style>
  :root {
    --ife-navy: #003F70;
    --ife-blue: #005198;
    --ife-sky: #2899D5;
    --ife-light-blue: #84B8E3;
    --ife-orange: #F37021;
    --ife-lime: #CBDC00;
    --ife-slate: #67808E;
    --ife-charcoal: #51585E;
    --ife-white: #FFFFFF;
    --ife-off-white: #F5F7F9;
    --ife-border: #E2E8F0;
    --card-shadow: 0 2px 8px rgba(0, 63, 112, 0.08);
    --card-radius: 8px;
    --sidebar-width: 340px;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: "Gotham", "Calibri", "Segoe UI", sans-serif;
    color: var(--ife-charcoal);
    background: var(--ife-off-white);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  /* ── Header ── */
  .header {
    background: var(--ife-navy);
    border-bottom: 4px solid var(--ife-sky);
    padding: 16px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 12px;
    z-index: 100;
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
  }

  .header-title {
    color: var(--ife-white);
  }

  .header-title h1 {
    font-size: 20px;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: 0.02em;
  }

  .header-title .subtitle {
    font-size: 13px;
    font-weight: 400;
    color: var(--ife-light-blue);
  }

  /* ── Mode Toggle (larger) ── */
  .mode-toggle {
    display: flex;
    background: rgba(255,255,255,0.12);
    border-radius: 24px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.2);
  }

  .mode-btn {
    padding: 12px 28px;
    font-size: 16px;
    font-weight: 600;
    font-family: inherit;
    border: none;
    cursor: pointer;
    background: transparent;
    color: rgba(255,255,255,0.7);
    transition: all 0.2s ease;
    white-space: nowrap;
  }

  .mode-btn:hover {
    color: var(--ife-white);
    background: rgba(255,255,255,0.08);
  }

  .mode-btn.active {
    background: var(--ife-sky);
    color: var(--ife-white);
  }

  /* ── Layout: Sidebar + Content ── */
  .app-layout {
    display: flex;
    min-height: auto;
  }

  /* ── Sidebar ── */
  .sidebar {
    width: var(--sidebar-width);
    min-width: var(--sidebar-width);
    background: var(--ife-white);
    border-right: 1px solid var(--ife-border);
    overflow-y: visible;
    height: auto;
  }

  .sidebar-intro {
    padding: 20px;
    border-bottom: 1px solid var(--ife-border);
  }

  .sidebar-intro h3 {
    font-size: 14px;
    font-weight: 700;
    color: var(--ife-navy);
    margin-bottom: 8px;
  }

  .sidebar-intro p {
    font-size: 12px;
    color: var(--ife-slate);
    line-height: 1.5;
  }

  .sidebar-intro .disclaimer {
    margin-top: 10px;
    font-size: 11px;
    font-style: italic;
    color: var(--ife-slate);
    border-top: 1px solid var(--ife-border);
    padding-top: 10px;
  }

  /* ── District list in sidebar ── */
  .district-section {
    border-bottom: 1px solid var(--ife-border);
  }

  .district-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 20px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 700;
    color: var(--ife-navy);
    background: transparent;
    border: none;
    width: 100%;
    text-align: left;
    font-family: inherit;
    transition: background 0.15s ease;
  }

  .district-header:hover {
    background: var(--ife-off-white);
  }

  .district-header .chevron {
    font-size: 12px;
    transition: transform 0.2s ease;
    color: var(--ife-slate);
  }

  .district-header.expanded .chevron {
    transform: rotate(180deg);
  }

  .district-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .district-body.open {
    max-height: 600px;
  }

  .district-candidate {
    padding: 10px 20px 10px 32px;
    border-top: 1px solid var(--ife-border);
  }

  .district-candidate-name {
    font-size: 13px;
    font-weight: 600;
    color: var(--ife-sky);
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
    margin-bottom: 2px;
  }

  .district-candidate-name:hover {
    text-decoration: underline;
    color: var(--ife-blue);
  }

  .district-candidate-detail {
    font-size: 11px;
    color: var(--ife-slate);
    line-height: 1.4;
  }

  .sidebar-incumbent {
    display: block;
    font-size: 10px;
    color: var(--ife-slate);
    font-weight: 400;
    font-style: italic;
    margin-top: -1px;
    margin-bottom: 4px;
  }

  .district-candidate-detail a {
    color: var(--ife-slate);
    text-decoration: none;
  }

  .district-candidate-detail a:hover {
    text-decoration: underline;
    color: var(--ife-sky);
  }

  /* ── Content Area ── */
  .content {
    flex: 1;
    padding: 24px;
    min-width: 0;
  }

  /* ── Profile Card ── */
  .profile-card {
    background: var(--ife-white);
    border-radius: var(--card-radius);
    box-shadow: var(--card-shadow);
    padding: 20px 24px;
    margin-bottom: 20px;
    border-left: 4px solid var(--ife-sky);
  }

  .profile-card h2 {
    font-size: 22px;
    color: var(--ife-navy);
    margin-bottom: 6px;
  }

  .profile-meta {
    font-size: 14px;
    color: var(--ife-slate);
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
  }

  .profile-meta .sep {
    color: var(--ife-border);
  }

  .profile-meta a {
    color: var(--ife-sky);
    text-decoration: none;
    font-weight: 600;
  }

  .profile-meta a:hover {
    text-decoration: underline;
  }

  .incumbent-note {
    font-size: 13px;
    color: var(--ife-slate);
    margin-top: 4px;
    font-style: italic;
  }

  .profile-district {
    display: inline-block;
    background: var(--ife-off-white);
    color: var(--ife-navy);
    font-size: 12px;
    font-weight: 600;
    padding: 2px 10px;
    border-radius: 10px;
    margin-left: 4px;
  }

  /* ── Q&A Card (Accordion) ── */
  .qa-card, .compare-card {
    background: var(--ife-white);
    border-radius: var(--card-radius);
    box-shadow: var(--card-shadow);
    margin-bottom: 24px;
    overflow: hidden;
  }

  .qa-card-header, .compare-card-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: 20px 24px;
    cursor: pointer;
    user-select: none;
    gap: 12px;
  }

  .qa-card-header:hover, .compare-card-header:hover {
    background: var(--ife-off-white);
  }

  .qa-header-text {
    flex: 1;
    min-width: 0;
  }

  .qa-label {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--ife-orange);
    margin-bottom: 6px;
  }

  .qa-question {
    font-size: 16px;
    font-weight: 700;
    color: var(--ife-navy);
    line-height: 1.4;
  }

  .card-chevron {
    font-size: 14px;
    color: var(--ife-slate);
    transition: transform 0.2s ease;
    margin-top: 4px;
    flex-shrink: 0;
  }

  .card-chevron.collapsed {
    transform: rotate(-90deg);
  }

  .qa-card-body, .compare-card-body {
    max-height: 2000px;
    overflow: hidden;
    transition: max-height 0.3s ease, padding 0.3s ease;
  }

  .qa-card-body.collapsed, .compare-card-body.collapsed {
    max-height: 0;
  }

  .qa-card-body-inner, .compare-card-body-inner {
    padding: 0 24px 20px 24px;
    border-top: 1px solid var(--ife-border);
    padding-top: 16px;
  }

  .qa-answer {
    font-size: 15px;
    color: var(--ife-charcoal);
    line-height: 1.7;
    white-space: pre-wrap;
  }

  .qa-answer-note {
    font-size: 13px;
    color: var(--ife-slate);
    margin-top: 8px;
  }

  .qa-noanswer {
    font-size: 15px;
    color: var(--ife-slate);
    font-style: italic;
  }

  /* ── Compare Card ── */
  .candidate-answer-block {
    background: var(--ife-off-white);
    border-left: 3px solid var(--ife-sky);
    border-radius: 0 6px 6px 0;
    padding: 14px 18px;
    margin-bottom: 10px;
  }

  .candidate-answer-block:last-child {
    margin-bottom: 0;
  }

  .candidate-answer-name {
    font-size: 13px;
    font-weight: 700;
    color: var(--ife-navy);
    margin-bottom: 6px;
  }

  .candidate-answer-text {
    font-size: 14px;
    color: var(--ife-charcoal);
    line-height: 1.65;
    white-space: pre-wrap;
  }

  /* ── Address Lookup Card ── */
  .lookup-card {
    background: var(--ife-white);
    border-radius: var(--card-radius);
    box-shadow: var(--card-shadow);
    padding: 20px 24px;
    margin-bottom: 20px;
    border-left: 4px solid var(--ife-sky);
  }

  .lookup-card h3 {
    font-size: 18px;
    font-weight: 700;
    color: var(--ife-navy);
    margin-bottom: 12px;
  }

  .lookup-form {
    display: flex;
    gap: 10px;
    align-items: flex-start;
  }

  .lookup-input {
    flex: 1;
    padding: 10px 14px;
    font-size: 15px;
    font-family: inherit;
    border: 1px solid var(--ife-border);
    border-radius: 6px;
    color: var(--ife-charcoal);
    outline: none;
    transition: border-color 0.2s ease;
  }

  .lookup-input:focus {
    border-color: var(--ife-sky);
    box-shadow: 0 0 0 3px rgba(40, 153, 213, 0.15);
  }

  .lookup-input::placeholder {
    color: var(--ife-slate);
    font-size: 14px;
  }

  .lookup-btn {
    padding: 10px 24px;
    font-size: 15px;
    font-weight: 600;
    font-family: inherit;
    background: var(--ife-blue);
    color: var(--ife-white);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    white-space: nowrap;
    transition: background 0.2s ease;
  }

  .lookup-btn:hover {
    background: var(--ife-navy);
  }

  .lookup-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .lookup-message {
    margin-top: 12px;
    font-size: 14px;
    line-height: 1.5;
  }

  .lookup-message.error {
    color: #c0392b;
  }

  .lookup-message.info {
    color: var(--ife-slate);
  }

  .lookup-message.district3 {
    color: var(--ife-navy);
    background: var(--ife-off-white);
    padding: 12px 16px;
    border-radius: 6px;
    border-left: 3px solid var(--ife-sky);
  }

  .lookup-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid var(--ife-border);
    border-top-color: var(--ife-sky);
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
    vertical-align: middle;
    margin-right: 6px;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  /* ── Lookup Badge (collapsed state) ── */
  .lookup-badge {
    background: var(--ife-white);
    border-radius: var(--card-radius);
    box-shadow: var(--card-shadow);
    padding: 12px 20px;
    margin-bottom: 20px;
    border-left: 4px solid var(--ife-sky);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  .lookup-badge-text {
    font-size: 15px;
    color: var(--ife-charcoal);
  }

  .lookup-badge-text strong {
    color: var(--ife-navy);
  }

  .lookup-badge-change {
    font-size: 14px;
    font-weight: 600;
    color: var(--ife-sky);
    background: none;
    border: none;
    cursor: pointer;
    font-family: inherit;
    padding: 4px 8px;
    border-radius: 4px;
    transition: background 0.15s ease;
  }

  .lookup-badge-change:hover {
    background: var(--ife-off-white);
    color: var(--ife-blue);
  }

  /* ── Content highlight animation ── */
  .district-highlight {
    animation: highlightPulse 1s ease-out;
  }

  @keyframes highlightPulse {
    0% { background-color: rgba(132, 184, 227, 0.2); }
    100% { background-color: transparent; }
  }

  /* ── OSM Attribution Footer ── */
  .osm-footer {
    text-align: center;
    padding: 16px 24px;
    font-size: 12px;
    color: var(--ife-slate);
  }

  .osm-footer a {
    color: var(--ife-slate);
    text-decoration: underline;
  }

  .osm-footer a:hover {
    color: var(--ife-sky);
  }

  /* ── Fade animation ── */
  .fade-in {
    animation: fadeIn 0.3s ease-in;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ── Responsive ── */
  @media (max-width: 768px) {
    .app-layout {
      flex-direction: column;
    }

    .sidebar {
      width: 100%;
      min-width: 100%;
      height: auto;
      position: static;
      border-right: none;
      border-bottom: 1px solid var(--ife-border);
    }

    .header {
      padding: 12px 16px;
      flex-direction: column;
      align-items: flex-start;
      position: static;
    }

    .header-left {
      gap: 10px;
    }

    .header-title h1 {
      font-size: 16px;
    }

    .mode-toggle {
      width: 100%;
    }

    .mode-btn {
      flex: 1;
      text-align: center;
      padding: 10px 16px;
      font-size: 14px;
    }

    .content {
      padding: 16px;
    }

    .qa-card, .compare-card {
      padding: 0;
    }

    .qa-card-header, .compare-card-header {
      padding: 16px 18px;
    }

    .qa-card-body-inner, .compare-card-body-inner {
      padding: 0 18px 16px 18px;
      padding-top: 14px;
    }

    .profile-card {
      padding: 16px 18px;
    }

    .lookup-form {
      flex-direction: column;
    }

    .lookup-input {
      min-height: 44px;
      font-size: 16px;
    }

    .lookup-btn {
      width: 100%;
      min-height: 44px;
      font-size: 16px;
    }

    .lookup-card {
      padding: 16px 18px;
    }

    .lookup-badge {
      padding: 10px 16px;
    }
  }
</style>
</head>
<body>

<header class="header">
  <div class="header-left">
  </div>
  <div class="mode-toggle">
    <button class="mode-btn" data-mode="candidate" onclick="setMode('candidate')">By Candidate</button>
    <button class="mode-btn active" data-mode="compare" onclick="setMode('compare')">By District</button>
  </div>
</header>

<div class="app-layout">
  <aside class="sidebar" id="sidebar"></aside>
  <main class="content" id="contentArea"></main>
</div>

<footer class="osm-footer">
  Address lookup powered by <a href="https://www.openstreetmap.org" target="_blank" rel="noopener noreferrer">OpenStreetMap</a>
</footer>

<script>
const surveyData = {
  questions: [
    {
      id: "q1",
      label: "Top 3 Priorities",
      text: "If elected, what are your top 3 priorities for the Cook County Board of Review and for your district?"
    },
    {
      id: "q2",
      label: "Transparency & Fairness",
      text: "How will you work to increase transparency, promote fairness, and standardize procedures within the appeal process and review of appeals?"
    },
    {
      id: "q3",
      label: "Accessibility & Outreach",
      text: "Given rising property taxes and increases in appeals, what new steps will you take to ensure the appeal process is accessible and understood by all? What are your plans for communicating appeals guidance and engaging a broad audience?"
    },
    {
      id: "q4",
      label: "Collaboration with Assessor",
      text: "How do you envision your office collaborating and sharing information with the Cook County Assessor\u2019s Office?"
    },
    {
      id: "q5",
      label: "Systemic Inequities",
      text: "Reporting and studies over the last year have shown a shifting of the property tax burden onto residential homeowners, especially those in low-income communities and communities of color. How will you use your role to address these systemic inequities and other structural barriers to intergenerational homeownership and wealth-building?"
    }
  ],
  districts: [
    {
      id: "d1",
      name: "District 1",
      candidates: [
        {
          id: "d1a",
          name: "George A. Cardenas",
          incumbent: true,
          occupation: "I currently serve as Commissioner for the Cook County Board of Review, representing the 1st District. Previously, I served 20 years on the Chicago City Council as Alderman of the 12th Ward, including as Chair of the Environmental and Energy Committee and Chair of the Latino Caucus. I am also President of Cardenas Consulting, LLC, specializing in municipal finance, property taxation, and strategic management. I hold a B.S. in Accounting/Finance and a Master\u2019s in Political Science (International Relations). I am a U.S. Navy veteran. My background in finance, public policy, and executive management uniquely equips me to analyze valuations, reform processes, and protect taxpayers.",
          email: "aldcardenas12@gmail.com",
          website: "https://www.georgecardenas.com",
          answers: {
            q1: "1. Fair, Data-Driven Assessments.\nThe Board of Review is a quasi-judicial body. My priority is ensuring valuations are grounded in credible income analysis, correct classification, and transparent methodology. I support the use of disciplined valuation standards that apply equally to homeowners, small businesses, and commercial properties.\n\n2. Professionalization and Structural Reform.\nI have worked to modernize the Board by strengthening internal legal review, enhancing FOIA compliance, increasing analyst capacity, and reopening townships when late tax bills prevented residents from filing appeals. The Board must operate like a financial review body--not a political office.\n\n3. Homeowner Protection and Access.\nThe majority of appeals in my district come from residential property owners. I will continue expanding direct outreach, multilingual education campaigns, township reopenings when necessary, and proactive guidance so homeowners understand their rights before deadlines pass.\n\nThe reckless claim that the Board \"favors billionaires\" ignores reality. Every property owner has the legal right to appeal. My responsibility is not to deny rights based on property size--but to apply the law fairly and consistently across all classes.",
            q2: "Transparency and standardization begin with process discipline.\n\nFirst, I support clear, published valuation frameworks. Taxpayers deserve to know what data is being used, how income is evaluated, and how comparables are selected. I have advocated for stronger analytical review of income-producing properties and more uniform documentation requirements.\n\nSecond, I have supported strengthening internal review structures, including professional legal oversight and FOIA responsiveness. Public confidence requires clarity and timely disclosure.\n\nThird, I believe standardization requires cross-commissioner coordination. While each commissioner operates independently, shared analytical protocols and clearer written determinations promote consistency across districts.\n\nFourth, I support expanded data dashboards that show appeal outcomes by property class and township. Transparency dispels misinformation. The narrative that the Board \"favors billionaires\" often overlooks that high-value properties generate more data and documentation--not preferential treatment. Large properties also bear large assessments. Outcomes must reflect evidence, not political rhetoric.\n\nFinally, fairness requires access. I have supported reopening townships when late tax bills prevented residents from appealing on time. That decision directly benefited thousands of homeowners--not corporations.\n\nThe Board must be impartial, rules-based, and transparent. That is the standard I apply.",
            q3: "Rising assessments and growing appeals require proactive communication--not reactive politics.\n\nI have prioritized direct outreach across the 1st District, including community meetings, bilingual materials, township-specific education sessions, and digital guidance explaining the appeal process step by step. Many homeowners miss appeals not because they disagree with valuation--but because they do not understand timing, evidence requirements, or procedural rules.\n\nGoing forward, I will expand:\n- Multilingual video tutorials explaining residential and commercial appeal requirements\n- Simplified checklists for homeowners\n- Township-based alerts tied to filing windows\n- Partnerships with local chambers and community organizations\n- Earlier outreach before assessment notices are finalized\n\nI also believe we must continue reopening townships in extraordinary circumstances when systemic billing delays disadvantage residents. I supported doing so because fairness should not depend on mail timing.\n\nThe narrative that appeals are dominated by wealthy property owners overlooks a key fact: every property owner has the same statutory right to appeal. The real equity issue is ensuring that working families know how to exercise that right. My focus has been expanding that access--not limiting it.",
            q4: "The Assessor and the Board of Review serve distinct but complementary roles. The Assessor establishes initial valuations through mass appraisal. The Board reviews individual appeals and corrects errors based on evidence.\n\nCollaboration should include:\n- Data sharing protocols to improve classification accuracy\n- Consistent income methodology discussions for commercial property\n- Joint transparency initiatives so taxpayers understand differences in valuation approaches\n- Ongoing dialogue about modeling limitations and outlier detection\n\nHowever, collaboration must preserve independence. The Board exists to provide a check-and-balance. When data shows overassessment--particularly in residential communities--the Board must correct it.\n\nMy approach is professional, not adversarial. Where modeling errors or classification issues appear systemic, we should identify them collaboratively. Where disagreements arise, we must follow evidence.",
            q5: "Shifting tax burdens onto residential homeowners is a serious concern. Systemic inequity often results from modeling errors, outdated classifications, or failure to account for neighborhood-level market realities.\n\nIn my district, I have seen homeowners facing double-digit increases without clear explanation. That is unacceptable.\n\nTo address inequity:\n- I support rigorous review of residential comparables to ensure neighborhood-specific accuracy.\n- I support clear documentation requirements for income-producing property so assessments reflect true market conditions.\n- I have advocated for reopening townships when billing delays prevented homeowners from appealing.\n- I continue to support legislative exploration of a circuit breaker program to protect fixed-income and vulnerable homeowners.\n\nIntergenerational homeownership depends on predictability. Sudden, unexplained spikes destabilize families and communities. The Board\u2019s role is not political redistribution--it is correction of valuation errors.\n\nEquity means accuracy. Fairness means consistency. Transparency means public confidence.\n\nThe Board of Review must operate above rhetoric. My record reflects disciplined reform, expanded access, and a commitment to protecting homeowners while upholding uniform application of the law."
          }
        },
        {
          id: "d1b",
          name: "Juanita Irizarry",
          occupation: "I run my own consulting business advising non-profits, housing organizations, and women of color leaders on how to create social impact.",
          email: "info@juanitairizarry.com",
          website: "https://www.juanitairizarry.com/",
          answers: {
            q1: "I am fighting for stable housing and healthy communities.\n\nThe top three issues facing Cook County today are all connected to affordability: a rigged property tax system that puts billionaires first, rising housing costs that are pricing people out of their homes, and corrupt politicians who are more interested in serving the ultra-rich than everyday people. To fix the rigged property tax system, I will fight to make billionaires and big corporations pay their fair share, thus taking the burden off homeowners and renters. I will end backroom deals, hold commercial property to the same standards as everyone else, and require transparency by publishing all Board of Review decisions online for public review.\n\nI will protect seniors and homeowners from unfair tax increases by explaining assessments and addressing systemic bias that has long overcharged communities of color. I will support families navigating the appeals process through expanded community workshops, with an emphasis on communities that are most at risk of destabilization and/or lack access to information and support because of language or income barriers. All of these improvements will also benefit renters who experience rent increases due to landlords\u2019 higher property taxes resulting from corporate tax cuts.\n\nFinally, I will implement reforms at the Board of Review by strengthening ethics rules, expanding oversight through the Office of the Inspector General, modernizing the system to improve efficiency, and enforcing strict conflict-of-interest standards to prevent commissioners from accepting campaign contributions from tax appeal lawyers and entities that appear before them.",
            q2: "I will work to increase transparency and fairness in the appeals process by ending backroom deals that give massive tax reductions to large commercial properties while homeowners are forced to pay more.\n\nI will insist on the use of all available assessment data and bring to fruition an agreement on a shared methodology to be used by both the Assessor\u2019s Office and the Board of Review.\n\nI will require complete transparency by publishing every appeal and its justification online for public review, so residents can see how and why decisions are made. I will also track and publicly report disparities in how appeals are handled across different communities to ensure the system treats everyone equitably.\n\nTo standardize procedures and restore trust, I will support the strengthening of ethics and oversight, enforcement of strict conflict-of-interest rules, expansion of the authority of the Office of the Independent Inspector General, and the modernization of Board of Review operations so the process is efficient, accessible, and based on facts rather than favoritism.",
            q3: "With rising property taxes and more people filing appeals, it is critical that the appeals process is easy to access and understand. I will ensure equitable access to free property tax appeal clinics for homeowners and small businesses across the district and support families through community workshops that walk them through the process step by step. These clinics need to meet the community where they are, in places trusted and known by local residents that are accessible to seniors and people with disabilities as well.\n\nI will also publish all appeal decisions and their justifications online so residents can clearly see how outcomes are reached. In neighborhoods most at risk of displacement, I will explain assessment changes by publishing the data used to justify large commercial property tax decreases, and I will track and report disparities across communities to guide outreach and engagement with a broad audience. We need to ensure communication is provided in multiple languages, and stop the practice of prioritizing timely assessments just for the well-connected and wealthy.",
            q4: "I envision a strong, transparent working relationship with the Cook County Assessor\u2019s Office built on consistent standards and shared data. I will push for uniform valuation standards across districts and insist that assessment data from the Assessor\u2019s Office be fully integrated into the Board of Review\u2019s analysis process so appeals are reviewed using the same facts and methodologies countywide. I will engage with the affordable housing community to consider approaches to better protect the affordability of both publicly-subsidized and naturally-occuring affordable housing and serve as a bridge with the Assessor\u2019s Office on these issues. I will work advocates, the Assessor\u2019s Office, and the Illinois General Assembly to improve laws and valuation approaches that reduce displacement in gentrifying communities and address inequities especially affecting Black and Latino neighborhoods. By aligning data, policy, and reform efforts with the Assessor, my office will help ensure fair, accurate, and transparent property tax assessments across Cook County. With that said, I also understand that disagreements are a healthy part of property tax assessment, and I will always fight for what I believe is fair and just.",
            q5: "The tax burden has not only shifted onto homeowners, but onto renters who bear the cost of rising property taxes through rent increases. Homeowners, renters, and seniors all deserve justice and have been negatively impacted by the millions in corporate tax breaks doled out by the Board of Review every year. As one who has lived, worked, and volunteered for the majority of my life in contexts fighting for affordable housing and in the face of gentrification, I will use my role on the Board of Review to address the unfair shifting of the tax burden onto homeowners, especially in low-income communities and communities of color, by making billionaires and large corporations finally pay their fair share. That means ending special treatment for the ultra-rich, holding corporate property owners to the same standards as everyone else, and ensuring fair assessments across all property types. I will also confront systemic bias in the assessment and appeals process by tracking and publicly reporting disparities and reforming practices that have overcharged communities of color. By protecting homeowners, seniors, and renters from sudden, unfair tax increases and expanding access to free appeal clinics and community workshops, I will help working families obtain and sustain homeownership and prevent displacement, strengthening intergenerational stability in our communities."
          }
        }
      ]
    },
    {
      id: "d2",
      name: "District 2",
      candidates: [
        {
          id: "d2a",
          name: "Samantha Steele, AAS",
          incumbent: true,
          occupation: "Current Occupation: Commissioner, Cook County Board of Review, District 2 (serving since December 2022). In this role, I work to ensure the property tax system is fair, transparent, and accessible for taxpayers across District 2 townships.\nOwner of Leanor Group: helping County Assessor\u2019s across the midwest with training, compliance auditing, and assessment work.\nPrevious Qualifying Experiences:\nCertified Level III Assessor/Appraiser with over 20 years of experience in property valuation and more than 500 hours of valuation education.\nFirst Commissioner in the Board\u2019s history to hold the Assessment Administration Specialist (AAS) designation from the International Association of Assessing Officers (IAAO); one of only four professionals in Illinois with this distinction.\nElected Assessor of Tippecanoe County, Indiana (2006), becoming the youngest in the county\u2019s history, marking the start of my public service career in property tax assessment and administration.",
          email: "Samantha@samanthasteele.org",
          website: "https://www.samanthasteele.org",
          answers: {
            q1: "If elected to continue serving as Commissioner for Cook County Board of Review District 2, my top three priorities will build on the progress we\u2019ve made since 2022, focusing on fairness, accessibility, and trust in the property tax system for homeowners and businesses across our 14 townships (including Norwood Park, Rogers Park, Evanston, Niles, Wheeling, and more).\n\n1. Enhancing fairness and equity in assessments through data-driven reforms. I will continue leading efforts like the Data Accuracy Campaign to identify and address inequities in property assessments, ensuring undervalued or overvalued properties are corrected. This includes expanding the use of advanced tools like the Standardized Technique for Adjudicating Residential Appeals (STARA), which provides analysts with three times more data--reviewing millions of comparables per session--compared to traditional methods. By standardizing valuation with market-driven algorithms, neighborhood sales studies, and appellant evidence, STARA has increased analysis notes by 40-50% without added staff, delivering faster, more accurate, and unbiased reviews for all taxpayers. My goal is to reduce disparities so no taxpayer--especially in underserved or diverse communities--bears a disproportionate burden, promoting a more equitable system overall.\n\n2. Expanding accessibility and outreach to every taxpayer--ending the \u201Cpay-to-play\u201D perception for good. Accessibility remains central to my work. I will build on our award-winning District 2 Outreach Program (recognized by NACo in 2025), which has hosted over 40 events and assisted thousands. Priorities include more Analyst Days, in-person workshops, Commercial Property Outreach for small businesses, and robust support for online filing. By partnering with local officials, libraries, and community centers, we\u2019ll make the appeals process straightforward, transparent, and available to all--including reopening opportunities when possible to help more residents exercise their rights. To truly eliminate any lingering \u201Cpay-to-play\u201D system--where complex appeals seemed to favor those who could afford attorneys or specialists--I\u2019ll prioritize empowering everyday homeowners and small business owners with free, direct assistance.",
            q1Note: "This answer was shortened to fit within character limits.",
            q2: "If elected to continue serving as Commissioner for Cook County Board of Review District 2, I will work tirelessly to increase transparency, promote fairness, and standardize procedures in the appeal process and review of appeals. Drawing on my more than 20 years of experience in property valuation--including as a certified Level III Assessor/Appraiser with over 500 hours of valuation education and the Assessment Administration Specialist (AAS) designation from the IAAO (one of only four in Illinois)--I have dedicated my career to fighting for fair taxes. This expertise has guided my reforms since 2022.\n\nIncreasing Transparency\nTransparency builds trust. I will expand public access to decision-making by improving online tools for viewing appeal statuses, outcomes, and supporting data. This includes clearer explanations of how assessments are determined and decisions reached. I\u2019ll continue timely, responsive constituent services and regular updates on reforms, ensuring taxpayers understand the process without needing intermediaries. As the only candidate not accepting campaign contributions from property tax attorneys, I eliminate any perception of influence or \u201Cpay-to-play,\u201D ensuring decisions are based solely on evidence and fairness--not special interests.\n\nPromoting Fairness\nFairness means equitable treatment for all taxpayers. I will build on initiatives like the Data Accuracy Campaign to correct inequities in assessments. Central to this is expanding the Standardized Technique for Adjudicating Residential Appeals (STARA), which I developed and implemented in 2023. STARA equips analysts with three times more data--reviewing two to three million comparables per session--using market-driven algorithms, neighborhood sales ratio studies, and appellant evidence. This has boosted analysis notes by 40-50% without added staff, enabling faster, more accurate, unbiased reviews. By standardizing valuation, STARA reduces disparities, particularly in diverse or underserved communities, ensuring no taxpayer bears a disproportionate burden.\n\nStandardizing Procedures\nStandardization eliminates inconsistency and bias. I will advocate for uniform application of valuation standards countywide, including updated neighborhood delineations and more frequent physical inspections to reflect true property conditions and prevent future assessment shocks. I\u2019ll push for consistent evidence requirements, streamlined online filing, and enhanced training for staff to apply objective criteria uniformly. These steps, combined with my pro se support programs--offering free education on gathering evidence and navigating appeals--empower everyday homeowners and small businesses to succeed based on facts, not fees or connections.\n\nMy track record proves my commitment: from pioneering STARA (recognized with a 2025 NACo Achievement Award) to award-winning outreach that has assisted thousands. With my independence from special-interest funding and deep valuation experience fighting for fair taxes, I will deliver a more transparent, fair, and standardized appeal process that serves every taxpayer in District 2 equitably.",
            q3: "If elected to continue serving as Commissioner for Cook County Board of Review District 2, I will address rising property taxes and surging appeals--issues exacerbated by years of mismanagement under political insiders like my opponent, who have prioritized connections over competence, leading to inconsistent assessments and eroded public trust. With my over 20 years of valuation experience fighting for fair taxes, including as the only candidate not accepting campaign contributions from property tax attorneys, I am committed to making the appeal process accessible, understandable, and predictable for all taxpayers.\n\nNew Steps to Ensure Accessibility and Understanding To combat these challenges, I\u2019ll expand on our proven reforms with innovative measures. First, I\u2019ll continue advocating for a comprehensive Assessment Manual--a tool I\u2019ve championed since 2022--to provide clear, standardized guidelines on valuation methods, evidence requirements, and decision criteria. This manual will offer predictability, helping taxpayers anticipate outcomes and prepare stronger appeals without relying on costly experts, reducing the \u201Cpay-to-play\u201D barriers that have plagued the system under insider control.\n\nI\u2019ll enhance pro se support by launching free \u201CAppeal Prep Clinics\u201D in partnership with community organizations, where analysts provide one-on-one guidance on gathering evidence like comparable sales data or property photos. Building on STARA (the Standardized Technique for Adjudicating Residential Appeals I developed), which already delivers faster, data-driven reviews, we\u2019ll integrate user-friendly tutorials into the online portal, allowing taxpayers to simulate appeals and understand potential results upfront.\n\nThird, to handle appeal increases, I\u2019ll push for extended filing windows during high-demand periods and mobile appeal units in underserved areas, ensuring no one is left out due to geographic or technological barriers. These steps will standardize procedures, minimize backlogs, and promote equity, countering the mismanagement that has driven up taxes through erratic assessments.\n\nPlans for Communicating Appeals Guidance and Engaging a Broad Audience Communication is key to demystifying the process. I\u2019ll amplify our award-winning District 2 Outreach Program (NACo-recognized in 2025) with multilingual resources, including video guides, infographics, and webinars in English, Spanish, Polish, and more, distributed via email newsletters, social media, and township partnerships.\n\nTo engage broadly, we\u2019ll host more Analyst Days and workshops at libraries, senior centers, and small business hubs, plus virtual town halls for real-time Q&A. I\u2019ll collaborate with local media and civic groups to spotlight success stories, fostering trust and encouraging participation. By prioritizing direct, no-cost education over insider favoritism, we\u2019ll empower homeowners and businesses to navigate appeals confidently.\n\nThese initiatives reflect my independent, expert-driven approach to fixing a broken system. Together, we can lower barriers, restore fairness, and ease the tax burden on District 2 families.",
            q4: "I envision my office to continue collaborating closely and transparently with the Cook County Assessor\u2019s Office to create a more unified, efficient, and fair property tax system. Effective collaboration is essential to reduce discrepancies, improve accuracy, and ease the burden on taxpayers across our 14 townships.\n\nCurrent Collaborations and the PTAX Reform Group Since 2022, we have built strong working relationships through joint initiatives and shared goals. A key example is my active participation in the Property Tax (PTAX) Reform Group--the first multi-office working group of its kind in Cook County, convened by the Cook County Board President and including the Assessor\u2019s Office, Board of Review, Clerk, Treasurer, and State\u2019s Attorney. Through PTAX, we have collaborated on in-depth analyses, such as the 2024 study on commercial property valuation practices (conducted with Josh Myers Valuation Solutions), which identified issues like inconsistent methods and limited data-sharing between offices. This led to actionable recommendations, including adopting standardized valuation approaches, establishing better data-sharing protocols, and increasing Assessor participation in appeals to enhance fairness and predictability.\n\nWe continue this work through PTAX subcommittees focused on public engagement, customer support coordination, and annual reporting to highlight joint progress and reinforce commitment to taxpayers. These efforts have already improved information flow and public-facing resources, such as unified portals combining data from both offices.\n\nFuture Vision for Collaboration and Information Sharing Building on these foundations, I will prioritize deeper, ongoing partnerships:\n\nEnhanced Data Sharing: Advocate for real-time, secure protocols to exchange assessment data, comparable sales, and evidence, reducing valuation gaps and preventing \u201Csticker shock\u201D from mismatched initial assessments and appeal outcomes. This includes integrating tools like STARA (which I developed for data-driven residential reviews) with Assessor processes for more consistent results.\n\nJoint Standardization Efforts: Work together on a comprehensive Assessment Manual (which I have long advocated for) to provide clear, predictable guidelines on valuation methods, evidence standards, and decision criteria--ensuring taxpayers and staff apply the same rules.\n\nCoordinated Outreach and Education: Expand joint workshops, Analyst Days, and online resources with the Assessor\u2019s Office to demystify the full cycle--from initial assessment to appeal--through multilingual materials, webinars, and community events. This will empower pro se filers and small businesses without reliance on paid intermediaries.\n\nRegular Policy Alignment: Convene frequent meetings to align on reforms like more frequent physical inspections (absent since 1997), updated neighborhood delineations, and backlog reduction strategies, addressing root causes of rising taxes and appeals.\n\nMy independence--no campaign contributions from property tax attorneys--ensures decisions prioritize taxpayers over special interests. With over 20 years of valuation experience fighting for fair taxes, I am committed to turning collaboration into tangible improvements: greater accuracy, equity, and trust in the system for every District 2 resident and business.",
            q5: "The Cook County Board of Review is a three-member board, with each commissioner elected from a distinct district. Meaningful, substantial changes--such as countywide policy reforms, standardized valuation practices, or major procedural overhauls--require a majority vote (at least two commissioners aligning on key decisions). As one commissioner, I can lead in my district and advocate forcefully, but to drive lasting, systemic progress against these inequities, we need alignment across at least two districts.\n\nWith over 20 years of valuation experience fighting for fair taxes--including as a certified Level III Assessor/Appraiser, pioneer of STARA, and the only candidate not accepting campaign contributions from property tax attorneys--I am independent and focused on solutions that prioritize equity.\n\nKey Actions I Will Take:\n\nExpand Data-Driven Equity Reforms: Build on the Data Accuracy Campaign and STARA (Standardized Technique for Adjudicating Residential Appeals, which I developed) to scrutinize assessments in vulnerable communities. STARA\u2019s market-driven algorithms and expanded comparables (reviewing millions per session) help correct overvaluations and disparities, ensuring fairer outcomes without bias. I\u2019ll advocate for targeted reviews in high-burden areas to prevent disproportionate impacts, and work to build coalitions with fellow commissioners for board-wide adoption.\n\nStrengthen Accessibility to Appeals: Low appeal rates in low-income and minority neighborhoods (often due to complexity, lack of resources, or awareness) allow inequities to persist. I\u2019ll intensify pro se support through free clinics, multilingual guides, evidence-gathering workshops, and expanded Analyst Days in District 2 townships. By demystifying the process and empowering homeowners to appeal successfully without paid specialists, we reduce the \u201Cpay-to-play\u201D dynamic that favors wealthier filers--and push for similar expansions countywide with majority support.\n\nAdvocate for Structural Changes via PTAX and Board Majority: Through the PTAX Reform Group--where I\u2019ve actively participated in joint studies on commercial valuation and exemptions--I\u2019ll push for recommendations like standardized valuation methods, better data-sharing between offices, a comprehensive Assessment Manual for predictability, and more frequent inspections to reflect true conditions. These address root causes like inconsistent assessments and underassessed commercial properties that shift burdens unfairly. To implement these broadly, I\u2019ll collaborate to secure the necessary two-district majority for board-level changes that protect residential homeowners.\n\nPromote Long-Term Homeownership Protections: I\u2019ll collaborate on reforms to ease financial strain, such as supporting circuit breaker proposals or exemption enhancements, while educating on homestead benefits. By fostering transparency and community partnerships (building on our NACo-award-winning outreach), we\u2019ll help families build and retain generational wealth through stable, equitable taxation.\n\nThese steps counter historical and ongoing mismanagement that has harmed communities of color. My commitment is to a fairer system that protects vulnerable homeowners, reduces barriers to homeownership, and rebuilds trust for all in District 2--while working toward the broader alliances needed for transformative change across the Board."
          }
        },
        {
          id: "d2b",
          name: "Elizabeth \u201CLiz\u201D Nicholson",
          occupation: "Current Occupation:\nChief Executive Officer of a woman-owned and managed consulting firm and Senior Advisor to the National Democratic County Officials (NDCO), a national political organization focused on electing Democratic county officials.\n\nPrevious Qualifying Experience:\nServed as a top aide to Illinois Secretary of State Jesse White. Held senior public service roles under the Governor, including Deputy Director at the Illinois Department of Employment Security, overseeing unemployment insurance and employment services, with a focus on veterans. Later appointed Chief Operating Officer at the Illinois Department of Central Management Services, the administrative and operational hub of Illinois state government, managing statewide governmental functions and operations.",
          website: "https://www.lizfor2.com/",
          answers: {
            q1: "1. Ensuring Fair and Accurate Property Tax Assessments\nMy foremost priority is protecting homeowners and small businesses by ensuring assessments are accurate, equitable, and based on consistent standards. Every taxpayer deserves a fair review process that is impartial, transparent, and free from favoritism.\n\n2. Increasing Transparency and Accessibility\nI will work to make the appeals process easier to understand and navigate by expanding multilingual resources, simplifying public information, and improving online access to case status and decisions. Residents should clearly understand how their assessments are calculated and how to challenge them if necessary.\n\n3. Improving Efficiency and Accountability\nI will advocate for modernizing case management systems and streamlining internal operations to reduce backlogs and delays. While Commissioners do not control the Board\u2019s full budget, I will push for smarter allocation of existing resources to improve service delivery without increasing costs to taxpayers.\n\nThese priorities focus on fairness, efficiency, and restoring public trust in the property tax system.",
            q2: "I will work to increase transparency, promote fairness, and standardize procedures by ensuring that the rules governing appeals are clear, consistently applied, and publicly accessible. That means publishing plain-language guidelines explaining how decisions are made, what evidence is required, and how comparable properties are evaluated. I would also support standardized review criteria across cases so outcomes are based on objective data rather than discretion.\n\nTo promote fairness, I will advocate for consistent documentation of decisions, improved data reporting, and technology that allows taxpayers to track the status of their appeals in real time. Expanding multilingual resources and outreach will help ensure equal access to the process. By combining clear standards, accessible information, and measurable performance benchmarks, we can create a more predictable, equitable, and accountable appeals system that earns public trust.",
            q3: "Given rising property taxes and increasing appeals, accessibility and clarity must be a top priority. I will expand plain-language guidance that clearly explains how assessments are calculated, what evidence strengthens an appeal, and what deadlines residents must meet. This includes step-by-step online tools, short instructional videos, and simplified written guides so taxpayers can navigate the process without needing outside representation. I will also advocate for real-time case tracking so residents can easily monitor the status of their appeal.\n\nTo reach a broad and diverse audience, I will prioritize multilingual materials, partner with community organizations and neighborhood groups to host workshops, and conduct both in-person and virtual outreach sessions across the district. Social media, email updates, and targeted digital communications will be used to provide timely reminders and educational content. By combining clear guidance, modern communication tools, and proactive community engagement, we can ensure every taxpayer understands their rights and has equal access to the appeals process.",
            q4: "I envision a professional, data-driven relationship with the Cook County Assessor\u2019s Office grounded in transparency and respect for each office\u2019s independent role. While the Assessor determines initial property valuations and the Board of Review evaluates appeals, both offices benefit from clear communication and consistent data standards. I would support regular information sharing on assessment methodologies, market trends, and common issues identified through appeals so that patterns can be addressed proactively and inconsistencies reduced.\n\nAt the same time, I would maintain the Board\u2019s independence in reviewing cases. Collaboration should focus on improving accuracy, reducing errors, and standardizing procedures--not influencing outcomes. By sharing aggregate data, identifying recurring discrepancies, and aligning on best practices for documentation and technology, we can create a more predictable and equitable property tax system while preserving the checks and balances built into the process.",
            q5: "Shifting tax burdens onto residential homeowners--particularly in low-income communities and communities of color--undermines both fairness and long-term stability. As a Commissioner on the Cook County Board of Review, my role would be to ensure that appeals are evaluated using consistent, data-driven standards and that assessments are scrutinized carefully for accuracy and uniformity. I would advocate for stronger analysis of assessment patterns, transparent reporting of outcomes, and closer examination of disparities that emerge across neighborhoods. When systemic inconsistencies appear, I would push for policy and procedural adjustments within the Board\u2019s authority to ensure equal treatment under the law.\n\nTo address structural barriers to intergenerational homeownership, I would focus on accessibility and empowerment. That means expanding multilingual outreach, partnering with housing counselors and community organizations, and ensuring homeowners understand exemptions, deadlines, and appeal rights. By making the system easier to navigate and holding the process to clear, objective standards, we can help prevent unjust overassessment, protect long-term homeowners from displacement, and promote a property tax system that supports equity and generational stability."
          }
        }
      ]
    }
  ]
};

/* ── State ── */
let currentMode = "compare";
let selectedCandidate = surveyData.districts[0].candidates[0].id;
let selectedDistrict = surveyData.districts[0].id;
// expandedDistricts removed — districts are always expanded in sidebar

/* ── Address Lookup State ── */
let districtGeoJSON = null;
let geoJSONLoaded = false;
let userDistrict = null;
let lookupExpanded = true;
let pendingCoords = null; // {lat, lon} queued while GeoJSON loads

const DISTRICT_ID_MAP = {1: "d1", 2: "d2", 3: "d3"};

/* ── GeoJSON Loading ── */
fetch("bor-districts.geojson")
  .then(r => r.json())
  .then(data => {
    districtGeoJSON = data;
    geoJSONLoaded = true;
    if (pendingCoords) {
      const {lat, lon} = pendingCoords;
      pendingCoords = null;
      resolveLookup(lat, lon);
    }
  })
  .catch(() => {
    // GeoJSON failed to load — lookup will show an error when attempted
  });

/* ── Point-in-Polygon (Ray Casting) ── */
function pointInPolygon(lat, lon, ring) {
  // ring is array of [lon, lat] coordinate pairs (GeoJSON order)
  let inside = false;
  for (let i = 0, j = ring.length - 1; i < ring.length; j = i++) {
    const xi = ring[i][0], yi = ring[i][1];
    const xj = ring[j][0], yj = ring[j][1];
    if (((yi > lat) !== (yj > lat)) &&
        (lon < (xj - xi) * (lat - yi) / (yj - yi) + xi)) {
      inside = !inside;
    }
  }
  return inside;
}

function findDistrictForCoords(lat, lon) {
  if (!districtGeoJSON) return null;
  for (const feature of districtGeoJSON.features) {
    const ring = feature.geometry.coordinates[0];
    if (pointInPolygon(lat, lon, ring)) {
      const districtNum = feature.properties.DISTRICT_INT;
      return DISTRICT_ID_MAP[districtNum] || null;
    }
  }
  return null;
}

/* ── Geocoding & Lookup ── */
async function handleAddressLookup() {
  const input = document.getElementById("lookup-address");
  const msgEl = document.getElementById("lookup-message");
  const btn = document.getElementById("lookup-btn");
  const address = input.value.trim();

  if (!address) {
    msgEl.className = "lookup-message error";
    msgEl.textContent = "Please enter an address.";
    return;
  }

  // Show loading state
  btn.disabled = true;
  msgEl.className = "lookup-message info";
  msgEl.innerHTML = '<span class="lookup-spinner"></span> Looking up your address\u2026';

  try {
    const url = "https://nominatim.openstreetmap.org/search?" + new URLSearchParams({
      q: address,
      format: "json",
      addressdetails: "1",
      countrycodes: "us"
    });

    const resp = await fetch(url, {
      headers: { "User-Agent": "ImpactForEquity-BoRSurvey/1.0 (info@impactforequity.org)" }
    });
    const results = await resp.json();

    // Filter to Cook County
    const cookResults = results.filter(r =>
      r.address && r.address.county && r.address.county.toLowerCase().includes("cook")
    );

    if (cookResults.length === 0) {
      if (results.length === 0) {
        msgEl.className = "lookup-message error";
        msgEl.textContent = "We couldn\u2019t find that address. Please check the address and try again.";
      } else {
        msgEl.className = "lookup-message error";
        msgEl.textContent = "This address doesn\u2019t appear to be in Cook County. The Board of Review covers Cook County properties only.";
      }
      btn.disabled = false;
      return;
    }

    const lat = parseFloat(cookResults[0].lat);
    const lon = parseFloat(cookResults[0].lon);

    if (!geoJSONLoaded) {
      // Queue for when GeoJSON finishes loading
      pendingCoords = {lat, lon};
      msgEl.className = "lookup-message info";
      msgEl.innerHTML = '<span class="lookup-spinner"></span> Loading district boundaries\u2026';
      return;
    }

    resolveLookup(lat, lon);
  } catch (e) {
    msgEl.className = "lookup-message error";
    msgEl.textContent = "Something went wrong looking up your address. Please try again.";
    btn.disabled = false;
  }
}

function resolveLookup(lat, lon) {
  const msgEl = document.getElementById("lookup-message");
  const btn = document.getElementById("lookup-btn");

  const districtId = findDistrictForCoords(lat, lon);

  if (!districtId) {
    msgEl.className = "lookup-message error";
    msgEl.textContent = "This address doesn\u2019t appear to be in Cook County. The Board of Review covers Cook County properties only.";
    if (btn) btn.disabled = false;
    return;
  }

  userDistrict = districtId;

  if (districtId === "d3") {
    // District 3 — no election this year
    msgEl.className = "lookup-message district3";
    msgEl.textContent = "Your address is in District 3, which does not have a Board of Review election this year. You can still explore the candidates in other districts below.";
    if (btn) btn.disabled = false;
    lookupExpanded = true;
  } else {
    // District 1 or 2 — navigate
    lookupExpanded = false;
    selectedDistrict = districtId;
    setMode("compare");
    // Add highlight animation
    setTimeout(() => {
      const fadeEl = document.querySelector("#contentArea .fade-in");
      if (fadeEl) fadeEl.classList.add("district-highlight");
    }, 50);
  }
}

/* ── Helpers ── */
function findCandidate(id) {
  for (const d of surveyData.districts) {
    for (const c of d.candidates) {
      if (c.id === id) return c;
    }
  }
  return null;
}

function findDistrictForCandidate(id) {
  for (const d of surveyData.districts) {
    for (const c of d.candidates) {
      if (c.id === id) return d;
    }
  }
  return null;
}

function findDistrict(id) {
  return surveyData.districts.find(d => d.id === id) || null;
}

function escapeHtml(str) {
  const div = document.createElement("div");
  div.textContent = str;
  return div.innerHTML;
}

function escapeAttr(str) {
  return str.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
}

/* ── Mode switching ── */
function setMode(mode) {
  currentMode = mode;
  document.querySelectorAll(".mode-btn").forEach(btn => {
    btn.classList.toggle("active", btn.dataset.mode === mode);
  });
  renderContent();
}

/* ── Sidebar ── */
function renderSidebar() {
  const sidebar = document.getElementById("sidebar");
  let html = `<div class="sidebar-intro">
    <h3>About This Survey</h3>
    <p>Ahead of the March 2026 primary election, Impact for Equity sent questionnaires to all candidates running for Cook County Board of Review Commissioner seats. Each candidate was asked the same set of questions. All candidates were given two weeks to respond, and answers have been published verbatim from the submitted responses.</p>
    <div class="disclaimer">Impact for Equity is a 501(c)(3) nonprofit organization. This questionnaire is provided for informational purposes only and does not constitute an endorsement of any candidate, nor our support for or opposition to any candidate.</div>
  </div>`;

  for (const d of surveyData.districts) {
    html += `<div class="district-section">
      <button class="district-header" onclick="toggleDistrict('${d.id}')">
        <span>${escapeHtml(d.name)}</span>
      </button>`;

    for (const c of d.candidates) {
      html += `<div class="district-candidate">
        <a class="district-candidate-name" onclick="selectCandidateFromSidebar('${c.id}')">${escapeHtml(c.name)}</a>${c.incumbent ? '<span class="sidebar-incumbent">(Incumbent)</span>' : ''}
      </div>`;
    }

    html += `</div>`;
  }

  sidebar.innerHTML = html;
}

function toggleDistrict(districtId) {
  selectedDistrict = districtId;
  setMode("compare");
}

function selectCandidateFromSidebar(id) {
  selectedCandidate = id;
  const d = findDistrictForCandidate(id);
  if (d) {
    selectedDistrict = d.id;
  }
  if (currentMode !== "candidate") {
    setMode("candidate");
  } else {
    renderContent();
  }
}

/* ── Toggle answer accordion ── */
function toggleAnswer(cardId) {
  const body = document.getElementById(cardId + "-body");
  const chevron = document.getElementById(cardId + "-chevron");
  if (body && chevron) {
    body.classList.toggle("collapsed");
    chevron.classList.toggle("collapsed");
  }
}

/* ── Selection ── */
function selectCandidate(id) {
  selectedCandidate = id;
  renderContent();
}

function selectDistrict(id) {
  selectedDistrict = id;
  renderContent();
}

/* ── Lookup Card Rendering ── */
function renderLookupCard() {
  if (!lookupExpanded && userDistrict) {
    // Collapsed badge
    const d = findDistrict(userDistrict);
    const name = d ? d.name : userDistrict;
    return `<div class="lookup-badge">
      <span class="lookup-badge-text">Your district: <strong>${escapeHtml(name)}</strong></span>
      <button class="lookup-badge-change" onclick="expandLookup()">Change</button>
    </div>`;
  }

  // Expanded card
  const addressVal = document.getElementById("lookup-address")
    ? document.getElementById("lookup-address").value
    : "";
  return `<div class="lookup-card">
    <h3>Find Your District</h3>
    <form class="lookup-form" onsubmit="event.preventDefault(); handleAddressLookup();">
      <input type="text" id="lookup-address" class="lookup-input"
        placeholder="Enter your address (e.g. 123 Main St, Chicago, IL)"
        value="${escapeAttr(addressVal)}" autocomplete="street-address">
      <button type="submit" id="lookup-btn" class="lookup-btn">Search</button>
    </form>
    <div id="lookup-message" class="lookup-message"></div>
  </div>`;
}

function expandLookup() {
  lookupExpanded = true;
  userDistrict = null;
  renderContent();
}

/* ── Content rendering ── */
function renderContent() {
  const area = document.getElementById("contentArea");
  // Preserve lookup input value before re-render
  const prevInput = document.getElementById("lookup-address");
  const prevVal = prevInput ? prevInput.value : "";
  const prevMsg = document.getElementById("lookup-message");
  const prevMsgHTML = prevMsg ? prevMsg.outerHTML : "";

  let html = renderLookupCard();

  // Render main content into a temp container
  const tempDiv = document.createElement("div");
  if (currentMode === "candidate") {
    renderCandidateView(tempDiv);
  } else {
    renderCompareView(tempDiv);
  }
  html += tempDiv.innerHTML;
  area.innerHTML = html;

  // Restore input value
  const newInput = document.getElementById("lookup-address");
  if (newInput && prevVal) newInput.value = prevVal;

  // Restore message if card is expanded and had a message
  if (lookupExpanded && prevMsgHTML && userDistrict === "d3") {
    const newMsg = document.getElementById("lookup-message");
    if (newMsg) {
      newMsg.className = "lookup-message district3";
      newMsg.textContent = "Your address is in District 3, which does not have a Board of Review election this year. You can still explore the candidates in other districts below.";
    }
  }
}

function renderCandidateView(area) {
  const c = findCandidate(selectedCandidate);
  const d = findDistrictForCandidate(selectedCandidate);
  if (!c || !d) { area.innerHTML = ""; return; }

  let html = `<div class="fade-in">`;

  // Profile card
  const websiteDisplay = c.website ? c.website.replace(/^https?:\/\//, "") : "";
  html += `<div class="profile-card">
    <h2>${escapeHtml(c.name)}${c.incumbent ? " *" : ""} <span class="profile-district">${escapeHtml(d.name)}</span></h2>
    <div class="profile-meta">`;
  if (c.occupation) {
    html += `<span>${escapeHtml(c.occupation)}</span>`;
  }
  if (c.email) {
    html += `<span class="sep">&middot;</span>
      <a href="mailto:${escapeHtml(c.email)}">${escapeHtml(c.email)}</a>`;
  }
  if (c.website) {
    html += `<span class="sep">&middot;</span>
      <a href="${escapeHtml(c.website)}" target="_blank" rel="noopener noreferrer">${escapeHtml(websiteDisplay)}</a>`;
  }
  html += `</div>`;
  if (c.incumbent) {
    html += `<div class="incumbent-note">* Incumbent</div>`;
  }
  html += `</div>`;

  // Q&A accordion cards
  surveyData.questions.forEach((q, i) => {
    const answer = c.answers[q.id];
    const cardId = "qa-" + q.id;
    html += `<div class="qa-card">
      <div class="qa-card-header" onclick="toggleAnswer('${cardId}')">
        <div class="qa-header-text">
          <div class="qa-label">Question ${i + 1}</div>
          <div class="qa-question">${escapeHtml(q.text)}</div>
        </div>
        <span class="card-chevron" id="${cardId}-chevron">&#9660;</span>
      </div>
      <div class="qa-card-body" id="${cardId}-body">
        <div class="qa-card-body-inner">`;
    if (answer) {
      html += `<div class="qa-answer">${escapeHtml(answer)}</div>`;
      const note = c.answers[q.id + "Note"];
      if (note) html += `<div class="qa-answer-note"><em>${escapeHtml(note)}</em></div>`;
    } else {
      html += `<div class="qa-noanswer">No response provided.</div>`;
    }
    html += `</div></div></div>`;
  });

  html += `</div>`;
  area.innerHTML = html;
}

function renderCompareView(area) {
  const d = findDistrict(selectedDistrict);
  if (!d) { area.innerHTML = ""; return; }

  let html = `<div class="fade-in">`;

  // District header
  html += `<h2 class="district-view-title">${escapeHtml(d.name)}</h2>`;

  // Occupation / Experience card
  const occCardId = "cmp-occupation";
  html += `<div class="compare-card">
    <div class="compare-card-header" onclick="toggleAnswer('${occCardId}')">
      <div class="qa-header-text">
        <div class="qa-label">Background</div>
        <div class="qa-question">Occupation / Experience</div>
      </div>
      <span class="card-chevron" id="${occCardId}-chevron">&#9660;</span>
    </div>
    <div class="compare-card-body" id="${occCardId}-body">
      <div class="compare-card-body-inner">`;
  for (const c of d.candidates) {
    html += `<div class="candidate-answer-block">
      <div class="candidate-answer-name">${escapeHtml(c.name)}</div>`;
    if (c.occupation) {
      html += `<div class="candidate-answer-text">${escapeHtml(c.occupation)}</div>`;
    } else {
      html += `<div class="candidate-answer-text qa-noanswer">No response provided.</div>`;
    }
    html += `</div>`;
  }
  html += `</div></div></div>`;

  surveyData.questions.forEach((q, i) => {
    const cardId = "cmp-" + q.id;
    html += `<div class="compare-card">
      <div class="compare-card-header" onclick="toggleAnswer('${cardId}')">
        <div class="qa-header-text">
          <div class="qa-label">Question ${i + 1}</div>
          <div class="qa-question">${escapeHtml(q.text)}</div>
        </div>
        <span class="card-chevron" id="${cardId}-chevron">&#9660;</span>
      </div>
      <div class="compare-card-body" id="${cardId}-body">
        <div class="compare-card-body-inner">`;

    for (const c of d.candidates) {
      const answer = c.answers[q.id];
      html += `<div class="candidate-answer-block">
        <div class="candidate-answer-name">${escapeHtml(c.name)}</div>`;
      if (answer) {
        html += `<div class="candidate-answer-text">${escapeHtml(answer)}</div>`;
        const note = c.answers[q.id + "Note"];
        if (note) html += `<div class="qa-answer-note"><em>${escapeHtml(note)}</em></div>`;
      } else {
        html += `<div class="candidate-answer-text qa-noanswer">No response provided.</div>`;
      }
      html += `</div>`;
    }

    html += `</div></div></div>`;
  });

  html += `</div>`;
  area.innerHTML = html;
}

/* ── Init ── */
document.addEventListener("DOMContentLoaded", function() {
  renderSidebar();
  renderContent();
});
</script>
<script>
window.addEventListener("load", function() {
  var send = function() { parent.postMessage({ borHeight: document.body.scrollHeight }, "*"); };
  send();
  new ResizeObserver(send).observe(document.body);
});
</script>
</body>
</html>
